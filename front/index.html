<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>HOME Alkemy Challenge </title>
	<link rel="stylesheet" href="css/index.css">
</head>
<body>
	<header id="container">
		<img id="logo" src="img/alkemy.png" /><br>
		<h1>HOME Alkemy challenge</h1><br>
		<h2>Roberto Zitto</h2>
	</header>
	<nav><a href="./list.html">Ver todos los movimientos</a></nav>

	<section>
		<p id='saldo'></p>
		<button onclick="mostrarFormInput()">Nuevo registro</button>
	</section>
	
	<div id="formInput"></div>
	
	<section>

	<table id='last10'>
		<tr><th colspan="4">Ultimos movimientos<th></tr>
		<tr>
			<th>
				Fecha
			</th>
			<th>
				Concepto
			</th>
			<th>
				Monto
			</th>
			<th>
				Ingreso/Egreso
			</th>

		</tr>
	</table>
	</section>

	<script src="scriptsfront/scriptinput.js" type="text/javascript"></script>

	<script type="text/javascript">
		fetch('getSaldo')
			.then(data => data.json())
			.then(data => document.getElementById('saldo').innerHTML =
			 `SALDO ACTUAL: <span style=${"color:" + (data[0].saldo >= 0 ? "green": "red")}>${data[0].saldo}</span>` )
				//JSON.stringify(data));
		fetch('last10')
			.then(data => data.json())
			.then(data => {
				for (r of data) document.getElementById('last10'). innerHTML += `<tr>
						<td>${getDateYo(r.FechaCreado)}</td>
						<td>${r.Concepto}</td>
						<td style=${"color:" + (r.IngEgr == "Ingreso" ? "green": "red")}> ${r.Monto}</td>
						<td> ${r.IngEgr}</td> </tr>`
			})

	function getDateYo(timestamp) {
		console.log(timestamp);
		
		timestamp = timestamp.slice(0,timestamp.indexOf("T"))
		return timestamp;
	}		
	
	</script>
</body>